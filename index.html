<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>БЕТОН – Карта районів Києва</title>
  <!-- Підключення стилів Leaflet (для мапи) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-o9N1j6kZ3GySbVFg6yBfIrL0B5gREK+De8pQ+8yXtzU="
        crossorigin=""/> 
  <!-- Можна додати власні стилі -->
  <style>
    body { margin: 0; display: flex; }
    #sidebar { width: 250px; padding: 10px; background: #f7f7f7; }
    #map { flex-grow: 1; height: 100vh; }
    #top3 { position: absolute; bottom: 10px; right: 10px; background: rgba(255,255,255,0.9);
            padding: 10px; border-radius: 5px; max-width: 200px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 4px; font-size: 90%; }
    th { background: #eee; }
  </style>
</head>
<body>
  <!-- Панель фільтрів -->
  <div id="sidebar">
    <h3>Фільтри районів</h3>
    <div><input type="checkbox" id="chkSchools"> <label for="chkSchools">Багато шкіл</label></div>
    <div><input type="checkbox" id="chkKinderg"> <label for="chkKinderg">Багато садочків</label></div>
    <div><input type="checkbox" id="chkMetro"> <label for="chkMetro">Близькість метро</label></div>
    <div><input type="checkbox" id="chkJobs"> <label for="chkJobs">Багато робочих місць</label></div>
    <div style="margin-top:10px;">
      <label>Ціна житла до (тис. грн): <input type="number" id="priceMax" value="0" style="width:60px;"></label>
    </div>
    <button id="applyFilters" style="margin-top:10px;">Показати ТОП-3</button>

    <!-- Таблиця з прикладом статистики по районах -->
    <table>
      <thead>
        <tr><th>Район</th><th>Населення</th><th>Шкіл</th><th>Садків</th><th>Ціна (грн/м²)</th></tr>
      </thead>
      <tbody>
        <tr><td>Голосіївський</td><td>247600</td><td>45</td><td>30</td><td>42000</td></tr>
        <tr><td>Дарницький</td><td>314700</td><td>58</td><td>40</td><td>35000</td></tr>
        <tr><td>Деснянський</td><td>358300</td><td>50</td><td>35</td><td>30000</td></tr>
        <!-- Інші райони... -->
      </tbody>
    </table>
  </div>

  <!-- Контейнер для мапи -->
  <div id="map"></div>

  <!-- Блок ТОП-3 районів -->
  <div id="top3">
    <h4>Топ-3 районів:</h4>
    <ol id="topList">
      <li><a href="podil.html">Подільський</a></li>
      <li><a href="svyatoshyn.html">Святошинський</a></li>
      <li><a href="solomianskyi.html">Солом'янський</a></li>
    </ol>
  </div>

  <!-- Підключення Leaflet.js -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-oY0x5cnQZEP8K6ZjPRwikzUYVG81FTRRD9uHeDtXmEc="
          crossorigin=""></script>
  <!-- Власний скрипт з логікою фільтрів і мапи -->
  <script>
    // Ініціалізація карти
    var map = L.map('map').setView([50.45, 30.52], 11);  // Київ: широта, довгота, масштаб
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Приклад точок об'єктів (школи, садки, університети, метро)
    var points = [
      {type: 'school', name: 'Ліцей №100', coords: [50.438, 30.530]},
      {type: 'kindergarten', name: 'Садок №45', coords: [50.441, 30.520]},
      {type: 'university', name: 'КНУ ім. Т. Шевченка', coords: [50.444, 30.520]},
      {type: 'metro', name: 'Майдан Незалежності', coords: [50.449, 30.523]},
      {type: 'bus_stop', name: 'Зуп. "Хрещатик"', coords: [50.445, 30.514]}
    ];
    // Іконки (мають бути додані відповідні URL або використовувати дефолтні)
    var icons = {
      school: L.icon({ iconUrl: 'school-icon.png', iconSize: [25,25] }),
      kindergarten: L.icon({ iconUrl: 'kindergarten-icon.png', iconSize: [25,25] }),
      university: L.icon({ iconUrl: 'university-icon.png', iconSize: [25,25] }),
      metro: L.icon({ iconUrl: 'metro-icon.png', iconSize: [25,25] }),
      bus_stop: L.icon({ iconUrl: 'bus-icon.png', iconSize: [25,25] })
    };

    // Додаємо всі точки на карту
    points.forEach(function(p) {
      var marker = L.marker(p.coords, {icon: icons[p.type]});
      marker.bindPopup('<b>' + p.name + '</b><br/>' + p.type);
      marker.addTo(map);
      p.marker = marker;  // зберігаємо маркер для фільтрації
    });

    // Функція для оновлення ТОП-3 (приклад реалізації)
    function updateTop3() {
      // Збираємо вибрані фільтри
      var filterSchools = document.getElementById('chkSchools').checked;
      var filterKinderg = document.getElementById('chkKinderg').checked;
      var filterMetro = document.getElementById('chkMetro').checked;
      var filterJobs = document.getElementById('chkJobs').checked;
      var priceMax = parseInt(document.getElementById('priceMax').value) || 0;

      // Дані по районах (приклад). У реальному випадку ці дані можна підвантажувати з файлу або API.
      var districts = [
        {name: 'Голосіївський', schools: 45, kinderg: 30, metro: 3, jobs: 120000, price: 42000},
        {name: 'Дарницький',  schools: 58, kinderg: 40, metro: 4, jobs: 90000, price: 35000},
        {name: 'Деснянський', schools: 50, kinderg: 35, metro: 2, jobs: 70000, price: 30000},
        {name: 'Солом\'янський', schools: 60, kinderg: 38, metro: 3, jobs: 100000, price: 48000},
        {name: 'Святошинський',schools: 55, kinderg: 45, metro: 3, jobs: 80000, price: 25000},
        {name: 'Подільський',  schools: 48, kinderg: 25, metro: 5, jobs: 95000, price: 30000}
        // ... інші райони
      ];
      // Оцінка району за фільтрами
      districts.forEach(function(d) {
        d.score = 0;
        if (filterSchools && d.schools > 50) d.score += 1;
        if (filterKinderg && d.kinderg > 30) d.score += 1;
        if (filterMetro && d.metro >= 3) d.score += 1;
        if (filterJobs && d.jobs > 80000) d.score += 1;
        if (priceMax > 0 && d.price <= priceMax * 1000) d.score += 1;
      });
      // Сортуємо за score (спадно) і виводимо перші 3
      districts.sort(function(a,b){return b.score - a.score;});
      var top = districts.slice(0,3);
      var list = document.getElementById('topList');
      list.innerHTML = '';
      top.forEach(function(d) {
        var li = document.createElement('li');
        var a = document.createElement('a');
        a.href = d.name.toLowerCase() + '.html';  // припустимо, файл названо за ім'ям району
        a.textContent = d.name;
        li.appendChild(a);
        list.appendChild(li);
      });
    }

    // Обробник кнопки «Показати ТОП-3»
    document.getElementById('applyFilters').addEventListener('click', updateTop3);
  </script>
</body>
</html>
